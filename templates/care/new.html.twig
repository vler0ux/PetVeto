{% extends 'base.html.twig' %}

{% block title %}Nouveau soin - PetVeto{% endblock %}

{% block body %}
<div class="container mt-4">
    <h1 class="mb-4">🩺 Ajouter un nouveau soin</h1>

    {% if form.vars.data.animal %}
        {% if lastVaccinationDate %}
            <div class="alert alert-info text-center">
                💉 Dernière vaccination de <strong>{{ form.vars.data.animal.name }}</strong> :
                <span class="fw-semibold">{{ lastVaccinationDate|date('d/m/Y') }}</span>
            </div>
        {% else %}
            <div class="alert alert-warning text-center">
                ⚠️ Aucun vaccin renseigné pour <strong>{{ form.vars.data.animal.name }}</strong>.
            </div>
        {% endif %}
    {% endif %}

    {{ form_start(form) }}
        {{ form_widget(form) }}

        <div class="d-flex gap-2 mt-3">
            <button class="btn btn-primary">✅ Enregistrer le soin</button>
            <a href="{{ path('app_home') }}" class="btn btn-secondary">⬅️ Retour à l’accueil</a>
        </div>
    {{ form_end(form) }}

    {% if form.veto is defined and form.veto.vars.choices is empty %}
        <div class="alert alert-warning mt-4 text-center">
            ⚠️ Aucun vétérinaire enregistré.<br>
            <a href="{{ path('veto_new') }}" class="btn btn-outline-primary mt-2">
                ➕ Ajouter un vétérinaire
            </a>
        </div>
    {% endif %}
</div>
{% endblock %}
