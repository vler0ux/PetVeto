
<div class="mb-3">
    {{ form_row(form.careName) }}
    <div class="form-group" id="customCareNameContainer" style="display: none;">
        {{ form_row(form.customCareName) }}
    </div>
</div>

<div class="mb-3">
    {{ form_row(form.food) }}
    <div class="form-group" id="customFoodContainer" style="display: none;">
        {{ form_row(form.customFood) }}
    </div>
</div>

<div class="mb-3">
    {{ form_row(form.behaviour) }}
    <div class="form-group" id="customBehaviourContainer" style="display: none;">
        {{ form_row(form.customBehaviour) }}
    </div>
</div>

<script>
    document.addEventListener("turbo:load", function () {
        const toggleField = (selectField, containerId) => {
            const container = document.getElementById(containerId);

            if (!selectField || !container) {
                console.warn("Champ ou conteneur manquant :", selectField, containerId);
                return;
            }

            const checkVisibility = () => {
                if (selectField.value === "autre") {
                    container.style.display = "block";
                } else {
                    container.style.display = "none";
                    const input = container.querySelector("input, textarea, select");
                    if (input) input.value = "";
                }
            };
                setTimeout(checkVisibility, 0);
                selectField.addEventListener("change", checkVisibility);
        };

        toggleField(document.querySelector("[name='care[careName]']"), "customCareNameContainer");
        toggleField(document.querySelector("[name='care[food]']"), "customFoodContainer");
        toggleField(document.querySelector("[name='care[behaviour]']"), "customBehaviourContainer");
    });
</script>
