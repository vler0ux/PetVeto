{{ form_start(form) }}
<div class="mb-3">
    {{ form_row(form.species) }}
        <div id="customSpeciesContainer" style="display: none; margin-top: 10px;">
            {{ form_row(form.customSpecies) }}
        </div>
</div>        

<div class="mb-3">
    {{ form_row(form.description) }}
        <div id="customDescriptionContainer" style="display: none; margin-top: 10px;">
            {{ form_row(form.customDescription) }}
        </div>
</div>
{{ form_end(form) }}


{% block javascripts %}
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const toggleField = (selectField, containerId) => {
                const container = document.getElementById(containerId);

                if (!selectField || !container) {
                    console.warn("Champ ou conteneur manquant :", selectField, containerId);
                    return;
                }

                const checkVisibility = () => {
                    const value = selectField.value.toLowerCase();
                    if (value === "Autre") { 
                        container.style.display = "block";
                    } else {
                        container.style.display = "none";
                        const input = container.querySelector("input, textarea, select");
                        if (input) input.value = "";
                    }
                };

                checkVisibility();
                
                selectField.addEventListener("change", checkVisibility);
            };

            toggleField(document.querySelector("[name='animal[species]']"), "customSpeciesContainer");
            toggleField(document.querySelector("[name='animal[description]']"), "customDescriptionContainer");
        });
    </script>
{% endblock %}
